networks:
  nginx:
    external: true

services:
  ###################################
  ####### BASE DE DONNÃ‰ES ###########
  ###################################

  mariadb:
    image: mariadb:11.4
    container_name: "mariadb"
    restart: always
    volumes:
      - ${PATH_VOLUMES}/mariadb/:/var/lib/mysql:rw
    environment:
      MARIADB_ROOT_PASSWORD: ${MARIADB_ROOT_PASSWORD}
    ports:
      - "3306:3306"
    networks:
      - nginx

  ###################################
  ############ PHPMYADMIN ###########
  ###################################

  phpmyadmin:
    container_name: "phpmyadmin"
    restart: unless-stopped
    image: arm64v8/phpmyadmin:5.2.2
    environment:
      PMA_HOST: mariadb
      VIRTUAL_HOST: pma.localhost
      VIRTUAL_PORT: 80
      UPLOAD_LIMIT: 1024M
      MEMORY_LIMIT: 2048M
    depends_on:
      - mariadb
    networks:
      - nginx